webpackJsonp([28411729818695],{685:function(e,t){e.exports={data:{post:{id:"C:/FILES/git/pers/blog/content/posts/2018-07-23--pio/index.md absPath of file >>> MarkdownRemark",html:'<p><a href="https://platformio.org">PlatformIO</a> is a framework, written in python, which turns your favourite (web) code editor into an embedded programming IDE. Not a VSCode fan? PlatformIO can just as well be used with the Atom editor, and there’s even integration with other popular desktop (e.g. Eclipse) and cloud IDE’s.</p>\n<p> It will add much-wanted features such as debugging, serial port monitoring, etc. to your editor. It has a nice library manager which will make it easy to find/install/update libraries (e.g. a MQTT library).</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-b9b8f.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 53.597497393117834%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABP+AAAT/gEHlDmEAAACNklEQVQoz22SuW7bQBCG+RK2JVE8llze9yXqdJBAjg0jiasAaVLmYYKocKE0saRKtk4gj/hnuIKFFC4+zM7Ocveffyg9Pf3BYrHAarXCy/Ma+/0Oh8Meu92W4kHE/f4132Oz2WC73VK+O9eb9ebwFy+bHaTR6Bpl0UMYZahiD0xXIcsyOp3Of7FzzlutFtrtNhRFIeisyqBoDLI3ws/ZI6T7+y+4u/2Ed++nGI8nCIIAURTB9304jkPrmPZCRHEs9l9rTQyJOEmRZAVM08R6vYY0GAxQlhXiIkFZV/Bcl4oGbNsG5yaYaYFxFwa3wRgTjzSc6lycsR0PXd3CfD6HNByOMOgPkFU5ev0K3OQoyhJxnIhWdGaISxVNp7ZlqKoqOLV8QqXa5VUbv5sLJ5NrVKQwykJ8+PELwfABpq6QAge6zqASGuMiNh8bhiGU6rp+QtPADI5WR8FyuYTU+JaTB0mZYPz5O4J8DMfiwjeX2jcsD6YTwbR9uswk/wJ4nicedBwXDrVuuwG6Gqe/5BlS3e8jS3MkFU25IuNpKEVR07pPsYc0q5EWQ6R5jSQtxH5Z1siyCnl+oiiHcPwUx+MRUtWrEYYxKcyQVyWp8slkh1T4wnjNsKBzj6JNXmmixi1bqHNJaTMgTkORaSiz2QxSny5JwwB5EcM0VDClC0NTwNQuQUOQ229im0xgGeShIkMn1G4Hkn/zDdroAfbdV8jDe1ykU1zmN2euire5yKZnmlypPkKtb/EP79Ru0jpAyQ8AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="PlatformIO in VS Code"\n        title=""\n        src="/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-48538.png"\n        srcset="/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-bed0f.png 200w,\n/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-5fd34.png 400w,\n/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-48538.png 800w,\n/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-b70ec.png 1200w,\n/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-d134a.png 1600w,\n/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-b9b8f.png 1918w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2>A first (blink) test</h2>\n<p>As a first test, to ensure connectivity with the board is fine and debugging works, let’s make a LED blink. Start at the platformIO home page and click “new project”. Then select the board you want to use (in my case: <em>Freescale Kinetis FRDM-K64F</em>) and press “Finish”.</p>\n<p>Your new project will consist of these files:</p>\n<ul>\n<li>\n<p><em>.pioenvs/</em>: build dir (firmware file, upload file, framework libraries, etc.)</p>\n</li>\n<li>\n<p><em>.vscode/</em>: VS Code settings: debug, paths, …</p>\n</li>\n<li>\n<p><em>lib/</em>: project-specific libraries</p>\n</li>\n<li>\n<p><em>src/</em>: project code</p>\n</li>\n<li>\n<p><em>platformio.ini</em>: Project config</p>\n<blockquote>\n<p>Optional: I am using a different debug tool. I have the Segger J-Link firmware for OpenSDAv2 installed on my kinetis board (instead of the existing mbed OpenSDAv2 firmware), for convenient use with Eclipse / Kinetis Design Studio. Therefor I need to add these lines to the settings in <code class="language-text">platformio.ini</code>:</p>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">debug_tool = jlink\nupload_protocol = jlink</code></pre>\n      </div>\n<p>Read more about the advantages of this alternative debugging firmware (over the standard mbed bootloader) <a href="https://mcuoneclipse.com/2014/04/27/segger-j-link-firmware-for-opensdav2/">here</a>\nIf you use the default mbed bootloader, you should be fine though.</p>\n</blockquote>\n</li>\n</ul>\n<p>Change the main file (<code class="language-text">src/main.cpp</code>) to blink a LED:</p>\n<div class="gatsby-highlight" data-language="c">\n      <pre class="language-c"><code class="language-c">#include &lt;mbed.h&gt;\n\nDigitalOut myled(LED1);\n\nint main() {\n    while(1) {\n        myled = 1;\n        wait(1);\n        myled = 0;\n        wait(1);\n    }\n}</code></pre>\n      </div>\n<p>The project is very concise, we didn’t have to make any mappings to hardware, since we’re relying the “mbed” libraries, which is the “framework” in platformIO lingo.</p>\n<p>A VS Code debug configuration was automatically created along with the project. Set a debug point if you want, then press the <em>debug</em> icon on the left, and launch it.</p>\n<h2>PlatformIO’s build system</h2>\n<p>PlatformIO does not use Make files. Instead it uses <strong>SCons</strong>, a cross-platform build tool based on Python. The SCons command will be built starting from your <code class="language-text">platformio.ini</code>, which is currently only a few lines long:</p>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">[env:frdm_k64f]\nplatform = freescalekinetis\nboard = frdm_k64f\nframework = mbed\ndebug_tool = jlink\nupload_protocol = jlink</code></pre>\n      </div>\n<p>The platform, board and framework determine which libraries will be used (freescale libraries, mbed libraries, <code class="language-text">startup_MK64F12.o</code>, etc). As previously mentioned I have added JLink as an upload/debug tool. Take a look at the board definition file <code class="language-text">frdm_k64f.json</code>, which carries build, debug and upload information:</p>\n<div class="gatsby-highlight" data-language="json">\n      <pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>\n  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"cpu"</span><span class="token operator">:</span> <span class="token string">"cortex-m4"</span><span class="token punctuation">,</span>\n    <span class="token property">"f_cpu"</span><span class="token operator">:</span> <span class="token string">"120000000L"</span><span class="token punctuation">,</span>\n    <span class="token property">"mcu"</span><span class="token operator">:</span> <span class="token string">"mk64fn1m0vll12"</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"connectivity"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">"ethernet"</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token property">"debug"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"jlink_device"</span><span class="token operator">:</span> <span class="token string">"MK64FN1M0xxx12"</span><span class="token punctuation">,</span>\n    <span class="token property">"pyocd_target"</span><span class="token operator">:</span> <span class="token string">"k64f"</span><span class="token punctuation">,</span>\n    <span class="token property">"svd_path"</span><span class="token operator">:</span> <span class="token string">"MK64F12.svd"</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"frameworks"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">"mbed"</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Freescale Kinetis FRDM-K64F"</span><span class="token punctuation">,</span>\n  <span class="token property">"upload"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"maximum_ram_size"</span><span class="token operator">:</span> <span class="token number">262144</span><span class="token punctuation">,</span>\n    <span class="token property">"maximum_size"</span><span class="token operator">:</span> <span class="token number">1048576</span><span class="token punctuation">,</span>\n    <span class="token property">"protocol"</span><span class="token operator">:</span> <span class="token string">"mbed"</span><span class="token punctuation">,</span>\n    <span class="token property">"protocols"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token string">"cmsis-dap"</span><span class="token punctuation">,</span>\n      <span class="token string">"jlink"</span><span class="token punctuation">,</span>\n      <span class="token string">"mbed"</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://developer.mbed.org/platforms/FRDM-K64F/"</span><span class="token punctuation">,</span>\n  <span class="token property">"vendor"</span><span class="token operator">:</span> <span class="token string">"Freescale"</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>When building, the PlatformIO executable is called, which in turn will call SCons, using the provided parameters and referencing the main build script file: <code class="language-text">main.py</code>. Take a look at it’s base template:</p>\n<div class="gatsby-highlight" data-language="python">\n      <pre class="language-python"><code class="language-python"><span class="token triple-quoted-string string">"""\n    Build script for test.py\n    test-builder.py\n"""</span>\n\n<span class="token keyword">from</span> os<span class="token punctuation">.</span>path <span class="token keyword">import</span> join\n<span class="token keyword">from</span> SCons<span class="token punctuation">.</span>Script <span class="token keyword">import</span> AlwaysBuild<span class="token punctuation">,</span> Builder<span class="token punctuation">,</span> Default<span class="token punctuation">,</span> DefaultEnvironment\n\nenv <span class="token operator">=</span> DefaultEnvironment<span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n<span class="token comment"># A full list with the available variables</span>\n<span class="token comment"># http://www.scons.org/doc/production/HTML/scons-user.html#app-variables</span>\nenv<span class="token punctuation">.</span>Replace<span class="token punctuation">(</span>\n    AR<span class="token operator">=</span><span class="token string">"ar"</span><span class="token punctuation">,</span>\n    AS<span class="token operator">=</span><span class="token string">"gcc"</span><span class="token punctuation">,</span>\n    CC<span class="token operator">=</span><span class="token string">"gcc"</span><span class="token punctuation">,</span>\n    CXX<span class="token operator">=</span><span class="token string">"g++"</span><span class="token punctuation">,</span>\n    OBJCOPY<span class="token operator">=</span><span class="token string">"objcopy"</span><span class="token punctuation">,</span>\n    RANLIB<span class="token operator">=</span><span class="token string">"ranlib"</span><span class="token punctuation">,</span>\n\n    ARFLAGS<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"..."</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\n    ASFLAGS<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"flag1"</span><span class="token punctuation">,</span> <span class="token string">"flag2"</span><span class="token punctuation">,</span> <span class="token string">"flagN"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    CCFLAGS<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"flag1"</span><span class="token punctuation">,</span> <span class="token string">"flag2"</span><span class="token punctuation">,</span> <span class="token string">"flagN"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    CXXFLAGS<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"flag1"</span><span class="token punctuation">,</span> <span class="token string">"flag2"</span><span class="token punctuation">,</span> <span class="token string">"flagN"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    LINKFLAGS<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"flag1"</span><span class="token punctuation">,</span> <span class="token string">"flag2"</span><span class="token punctuation">,</span> <span class="token string">"flagN"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\n    CPPDEFINES<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"DEFINE_1"</span><span class="token punctuation">,</span> <span class="token string">"DEFINE=2"</span><span class="token punctuation">,</span> <span class="token string">"DEFINE_N"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\n    LIBS<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"additional"</span><span class="token punctuation">,</span> <span class="token string">"libs"</span><span class="token punctuation">,</span> <span class="token string">"here"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\n    UPLOADER<span class="token operator">=</span>join<span class="token punctuation">(</span><span class="token string">"$PIOPACKAGES_DIR"</span><span class="token punctuation">,</span> <span class="token string">"tool-bar"</span><span class="token punctuation">,</span> <span class="token string">"uploader"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    UPLOADCMD<span class="token operator">=</span><span class="token string">"$UPLOADER $SOURCES"</span>\n<span class="token punctuation">)</span>\n\nenv<span class="token punctuation">.</span>Append<span class="token punctuation">(</span>\n    BUILDERS<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>\n        ElfToBin<span class="token operator">=</span>Builder<span class="token punctuation">(</span>\n            action<span class="token operator">=</span><span class="token string">" "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>\n                <span class="token string">"$OBJCOPY"</span><span class="token punctuation">,</span>\n                <span class="token string">"-O"</span><span class="token punctuation">,</span>\n                <span class="token string">"binary"</span><span class="token punctuation">,</span>\n                <span class="token string">"$SOURCES"</span><span class="token punctuation">,</span>\n                <span class="token string">"$TARGET"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            suffix<span class="token operator">=</span><span class="token string">".bin"</span>\n        <span class="token punctuation">)</span>\n    <span class="token punctuation">)</span>\n<span class="token punctuation">)</span>\n\n<span class="token comment"># The source code of "platformio-build-tool" is here</span>\n<span class="token comment"># https://github.com/platformio/platformio-core/blob/develop/platformio/builder/tools/platformio.py</span>\n\n<span class="token comment">#</span>\n<span class="token comment"># Target: Build executable and linkable firmware</span>\n<span class="token comment">#</span>\ntarget_elf <span class="token operator">=</span> env<span class="token punctuation">.</span>BuildProgram<span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n<span class="token comment">#</span>\n<span class="token comment"># Target: Build the .bin file</span>\n<span class="token comment">#</span>\ntarget_bin <span class="token operator">=</span> env<span class="token punctuation">.</span>ElfToBin<span class="token punctuation">(</span>join<span class="token punctuation">(</span><span class="token string">"$BUILD_DIR"</span><span class="token punctuation">,</span> <span class="token string">"firmware"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> target_elf<span class="token punctuation">)</span>\n\n<span class="token comment">#</span>\n<span class="token comment"># Target: Upload firmware</span>\n<span class="token comment">#</span>\nupload <span class="token operator">=</span> env<span class="token punctuation">.</span>Alias<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"upload"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target_bin<span class="token punctuation">,</span> <span class="token string">"$UPLOADCMD"</span><span class="token punctuation">)</span>\nAlwaysBuild<span class="token punctuation">(</span>upload<span class="token punctuation">)</span>\n\n<span class="token comment">#</span>\n<span class="token comment"># Target: Define targets</span>\n<span class="token comment">#</span>\nDefault<span class="token punctuation">(</span>target_bin<span class="token punctuation">)</span></code></pre>\n      </div>\n<p>The terminal output when building shows us the libraries in the mbed “framework”. The Freescale drives <code class="language-text">fsl_*</code> should look familiar if you’ve programmed Kinetis boards before.</p>\n<h2>Can I convert my existing embedded project to use platformIO?</h2>\n<p>Killer question. It should be possible, but depending on your current codebase/project this might be easy or quite hard. You could make your own development platform definition (a <code class="language-text">manifest.json</code> and <code class="language-text">main.py</code>) and board definition (<code class="language-text">myboard.json</code>). For examples, take a look at the <a href="">github repository</a>.</p>\n<h3>Yes, but should you?</h3>\n<p>You’d like to use a modern editor for your embedded project. PlatformIO is not the only way to achieve this. If your plan on keeping your directory structure, your own libraries and makefiles, you might not need/want platformIO. It might just be easier to open your existing code, and create a working launch (debug) config.</p>\n<p>Essentially you just want to stitch the VS Code launch config to GDB. The <a href="https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug">Cortex-Debug</a> extension can help you create the right launch configuration. The following launch configuration works fine with my Kinetis board:</p>\n<div class="gatsby-highlight" data-language="json">\n      <pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>\n    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span>\n    <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n        <span class="token punctuation">{</span>\n            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"cortex-debug"</span><span class="token punctuation">,</span>\n            <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span>\n            <span class="token property">"servertype"</span><span class="token operator">:</span> <span class="token string">"jlink"</span><span class="token punctuation">,</span>\n            <span class="token property">"cwd"</span><span class="token operator">:</span> <span class="token string">"${workspaceRoot}"</span><span class="token punctuation">,</span>\n            <span class="token property">"executable"</span><span class="token operator">:</span> <span class="token string">"&lt;full-path>/firmware.elf"</span><span class="token punctuation">,</span>\n            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Debug J-Link"</span><span class="token punctuation">,</span>\n            <span class="token property">"device"</span><span class="token operator">:</span> <span class="token string">"MK64FN1M0xxx12"</span><span class="token punctuation">,</span>\n            <span class="token property">"interface"</span><span class="token operator">:</span> <span class="token string">"swd"</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<blockquote>\n<p>I did have to set the <code class="language-text">cortex-debug.JLinkGDBServerPath</code> and <code class="language-text">cortex-debug.armToolchainPath</code> in workspace settings, but if the GDB and arm-eabi executables are in your system path you should be fine.</p>\n</blockquote>\n<p>Debugging is not the only thing you want though (but it’s a biggie). Other things you might want:</p>\n<ul>\n<li>\n<p>A serial monitor: check out <a href="https://marketplace.visualstudio.com/items?itemName=olback.vscode-serial">this extension</a>?</p>\n<blockquote>\n<p>You could use PlatformIO’s monitor, but platformIO does take some time to load at startup. So if all you’re going to use is the serial monitor, why go bulky?</p>\n</blockquote>\n</li>\n<li>\n<p>Building and flashing support, instellisense, …</p>\n<blockquote>\n<p>Update: check out my other post about Embedded VS Code development (without PlatformIO)</p>\n</blockquote>\n</li>\n</ul>\n<h2>Conclusion</h2>\n<p>PlatformIO is perfect if you’re a hobbyist and you’re just starting a new project. It will get you started fast, providing you with clean library and code management. If you have an existing project, it might not be trivial to convert to platformIO (using the platformIO board and framework definitions). You might then be better off configuring some extension(s) for debugging, serial console, etc. to fit your codebase.</p>',htmlAst:{type:"root",children:[{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"a",properties:{href:"https://platformio.org"},children:[{type:"text",value:"PlatformIO"}]},{type:"text",value:" is a framework, written in python, which turns your favourite (web) code editor into an embedded programming IDE. Not a VSCode fan? PlatformIO can just as well be used with the Atom editor, and there’s even integration with other popular desktop (e.g. Eclipse) and cloud IDE’s."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:" It will add much-wanted features such as debugging, serial port monitoring, etc. to your editor. It has a nice library manager which will make it easy to find/install/update libraries (e.g. a MQTT library)."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-b9b8f.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 53.597497393117834%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABP+AAAT/gEHlDmEAAACNklEQVQoz22SuW7bQBCG+RK2JVE8llze9yXqdJBAjg0jiasAaVLmYYKocKE0saRKtk4gj/hnuIKFFC4+zM7Ocveffyg9Pf3BYrHAarXCy/Ma+/0Oh8Meu92W4kHE/f4132Oz2WC73VK+O9eb9ebwFy+bHaTR6Bpl0UMYZahiD0xXIcsyOp3Of7FzzlutFtrtNhRFIeisyqBoDLI3ws/ZI6T7+y+4u/2Ed++nGI8nCIIAURTB9304jkPrmPZCRHEs9l9rTQyJOEmRZAVM08R6vYY0GAxQlhXiIkFZV/Bcl4oGbNsG5yaYaYFxFwa3wRgTjzSc6lycsR0PXd3CfD6HNByOMOgPkFU5ev0K3OQoyhJxnIhWdGaISxVNp7ZlqKoqOLV8QqXa5VUbv5sLJ5NrVKQwykJ8+PELwfABpq6QAge6zqASGuMiNh8bhiGU6rp+QtPADI5WR8FyuYTU+JaTB0mZYPz5O4J8DMfiwjeX2jcsD6YTwbR9uswk/wJ4nicedBwXDrVuuwG6Gqe/5BlS3e8jS3MkFU25IuNpKEVR07pPsYc0q5EWQ6R5jSQtxH5Z1siyCnl+oiiHcPwUx+MRUtWrEYYxKcyQVyWp8slkh1T4wnjNsKBzj6JNXmmixi1bqHNJaTMgTkORaSiz2QxSny5JwwB5EcM0VDClC0NTwNQuQUOQ229im0xgGeShIkMn1G4Hkn/zDdroAfbdV8jDe1ykU1zmN2euire5yKZnmlypPkKtb/EP79Ru0jpAyQ8AAAAASUVORK5CYII='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"PlatformIO in VS Code",title:"",src:"/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-48538.png",srcSet:["/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-bed0f.png 200w","/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-5fd34.png 400w","/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-48538.png 800w","/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-b70ec.png 1200w","/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-d134a.png 1600w","/static/pio1-bfa5a5c218151b8fc6e582e251d109d1-b9b8f.png 1918w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"h2",properties:{},children:[{type:"text",value:"A first (blink) test"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"As a first test, to ensure connectivity with the board is fine and debugging works, let’s make a LED blink. Start at the platformIO home page and click “new project”. Then select the board you want to use (in my case: "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Freescale Kinetis FRDM-K64F"}]},{type:"text",value:") and press “Finish”."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Your new project will consist of these files:"}]},{type:"text",value:"\n"},{type:"element",tagName:"ul",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:".pioenvs/"}]},{type:"text",value:": build dir (firmware file, upload file, framework libraries, etc.)"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:".vscode/"}]},{type:"text",value:": VS Code settings: debug, paths, …"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"lib/"}]},{type:"text",value:": project-specific libraries"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"src/"}]},{type:"text",value:": project code"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"platformio.ini"}]},{type:"text",value:": Project config"}]},{type:"text",value:"\n"},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Optional: I am using a different debug tool. I have the Segger J-Link firmware for OpenSDAv2 installed on my kinetis board (instead of the existing mbed OpenSDAv2 firmware), for convenient use with Eclipse / Kinetis Design Studio. Therefor I need to add these lines to the settings in "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"platformio.ini"}]},{type:"text",value:":"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"],dataLanguage:"text"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"debug_tool = jlink\nupload_protocol = jlink"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Read more about the advantages of this alternative debugging firmware (over the standard mbed bootloader) "},{type:"element",tagName:"a",properties:{href:"https://mcuoneclipse.com/2014/04/27/segger-j-link-firmware-for-opensdav2/"},children:[{type:"text",value:"here"}]},{type:"text",value:"\nIf you use the default mbed bootloader, you should be fine though."}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Change the main file ("},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"src/main.cpp"}]},{type:"text",value:") to blink a LED:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"],dataLanguage:"c"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-c"]},children:[{type:"element",tagName:"code",properties:{className:["language-c"]},children:[{type:"text",value:"#include <mbed.h>\n\nDigitalOut myled(LED1);\n\nint main() {\n    while(1) {\n        myled = 1;\n        wait(1);\n        myled = 0;\n        wait(1);\n    }\n}"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",
tagName:"p",properties:{},children:[{type:"text",value:"The project is very concise, we didn’t have to make any mappings to hardware, since we’re relying the “mbed” libraries, which is the “framework” in platformIO lingo."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"A VS Code debug configuration was automatically created along with the project. Set a debug point if you want, then press the "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"debug"}]},{type:"text",value:" icon on the left, and launch it."}]},{type:"text",value:"\n"},{type:"element",tagName:"h2",properties:{},children:[{type:"text",value:"PlatformIO’s build system"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"PlatformIO does not use Make files. Instead it uses "},{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"SCons"}]},{type:"text",value:", a cross-platform build tool based on Python. The SCons command will be built starting from your "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"platformio.ini"}]},{type:"text",value:", which is currently only a few lines long:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"],dataLanguage:"text"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"[env:frdm_k64f]\nplatform = freescalekinetis\nboard = frdm_k64f\nframework = mbed\ndebug_tool = jlink\nupload_protocol = jlink"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The platform, board and framework determine which libraries will be used (freescale libraries, mbed libraries, "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"startup_MK64F12.o"}]},{type:"text",value:", etc). As previously mentioned I have added JLink as an upload/debug tool. Take a look at the board definition file "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"frdm_k64f.json"}]},{type:"text",value:", which carries build, debug and upload information:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"],dataLanguage:"json"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-json"]},children:[{type:"element",tagName:"code",properties:{className:["language-json"]},children:[{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"{"}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"build"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"{"}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"cpu"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"cortex-m4"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"f_cpu"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"120000000L"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"mcu"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"mk64fn1m0vll12"'}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"}"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"connectivity"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"ethernet"'}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"debug"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"{"}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"jlink_device"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"MK64FN1M0xxx12"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"pyocd_target"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"k64f"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"svd_path"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"MK64F12.svd"'}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"}"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"frameworks"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"mbed"'}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"name"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"Freescale Kinetis FRDM-K64F"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"upload"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"{"}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"maximum_ram_size"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","number"]},children:[{type:"text",value:"262144"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"maximum_size"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","number"]},children:[{type:"text",value:"1048576"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"protocol"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"mbed"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"protocols"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"text",value:"\n      "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"cmsis-dap"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n      "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"jlink"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n      "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"mbed"'}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"}"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"url"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"https://developer.mbed.org/platforms/FRDM-K64F/"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"vendor"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"Freescale"'}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"}"}]}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"When building, the PlatformIO executable is called, which in turn will call SCons, using the provided parameters and referencing the main build script file: "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"main.py"}]},{type:"text",value:". Take a look at it’s base template:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"],dataLanguage:"python"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-python"]},children:[{type:"element",tagName:"code",properties:{className:["language-python"]},children:[{type:"element",tagName:"span",properties:{className:["token","triple-quoted-string","string"]},children:[{type:"text",value:'"""\n    Build script for test.py\n    test-builder.py\n"""'}]},{type:"text",value:"\n\n"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"from"}]},{type:"text",value:" os"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"path "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"import"}]},{type:"text",value:" join\n"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"from"}]},{type:"text",value:" SCons"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"Script "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"import"}]},{type:"text",value:" AlwaysBuild"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" Builder"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" Default"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" DefaultEnvironment\n\nenv "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" DefaultEnvironment"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"# A full list with the available variables"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"# http://www.scons.org/doc/production/HTML/scons-user.html#app-variables"}]},{type:"text",value:"\nenv"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"Replace"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"\n    AR"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"ar"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    AS"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"gcc"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    CC"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"gcc"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    CXX"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"g++"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    OBJCOPY"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"objcopy"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    RANLIB"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"ranlib"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n\n    ARFLAGS"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"..."'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n\n    ASFLAGS"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flag1"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flag2"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flagN"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    CCFLAGS"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flag1"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flag2"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flagN"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    CXXFLAGS"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flag1"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flag2"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flagN"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    LINKFLAGS"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flag1"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flag2"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"flagN"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n\n    CPPDEFINES"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"DEFINE_1"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"DEFINE=2"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"DEFINE_N"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n\n    LIBS"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"additional"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"libs"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"here"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n\n    UPLOADER"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:"join"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"$PIOPACKAGES_DIR"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"tool-bar"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"uploader"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    UPLOADCMD"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"$UPLOADER $SOURCES"'}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\nenv"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"Append"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"\n    BUILDERS"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","builtin"]},children:[{type:"text",value:"dict"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"\n        ElfToBin"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:"Builder"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"\n            action"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'" "'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"join"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"text",value:"\n                "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"$OBJCOPY"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n                "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"-O"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n                "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"binary"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n                "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"$SOURCES"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n                "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"$TARGET"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n            suffix"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'".bin"'}]},{type:"text",value:"\n        "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{
type:"text",value:")"}]},{type:"text",value:"\n\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:'# The source code of "platformio-build-tool" is here'}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"# https://github.com/platformio/platformio-core/blob/develop/platformio/builder/tools/platformio.py"}]},{type:"text",value:"\n\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"#"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"# Target: Build executable and linkable firmware"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"#"}]},{type:"text",value:"\ntarget_elf "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" env"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"BuildProgram"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"#"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"# Target: Build the .bin file"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"#"}]},{type:"text",value:"\ntarget_bin "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" env"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"ElfToBin"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"join"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"$BUILD_DIR"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"firmware"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" target_elf"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"#"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"# Target: Upload firmware"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"#"}]},{type:"text",value:"\nupload "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" env"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"Alias"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"upload"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" target_bin"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"$UPLOADCMD"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\nAlwaysBuild"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"upload"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"#"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"# Target: Define targets"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","comment"]},children:[{type:"text",value:"#"}]},{type:"text",value:"\nDefault"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"target_bin"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The terminal output when building shows us the libraries in the mbed “framework”. The Freescale drives "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"fsl_*"}]},{type:"text",value:" should look familiar if you’ve programmed Kinetis boards before."}]},{type:"text",value:"\n"},{type:"element",tagName:"h2",properties:{},children:[{type:"text",value:"Can I convert my existing embedded project to use platformIO?"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Killer question. It should be possible, but depending on your current codebase/project this might be easy or quite hard. You could make your own development platform definition (a "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"manifest.json"}]},{type:"text",value:" and "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"main.py"}]},{type:"text",value:") and board definition ("},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"myboard.json"}]},{type:"text",value:"). For examples, take a look at the "},{type:"element",tagName:"a",properties:{href:""},children:[{type:"text",value:"github repository"}]},{type:"text",value:"."}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Yes, but should you?"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"You’d like to use a modern editor for your embedded project. PlatformIO is not the only way to achieve this. If your plan on keeping your directory structure, your own libraries and makefiles, you might not need/want platformIO. It might just be easier to open your existing code, and create a working launch (debug) config."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Essentially you just want to stitch the VS Code launch config to GDB. The "},{type:"element",tagName:"a",properties:{href:"https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug"},children:[{type:"text",value:"Cortex-Debug"}]},{type:"text",value:" extension can help you create the right launch configuration. The following launch configuration works fine with my Kinetis board:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"],dataLanguage:"json"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-json"]},children:[{type:"element",tagName:"code",properties:{className:["language-json"]},children:[{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"{"}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"version"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"0.2.0"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"configurations"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"text",value:"\n        "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"{"}]},{type:"text",value:"\n            "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"type"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"cortex-debug"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n            "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"request"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"launch"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n            "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"servertype"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"jlink"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n            "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"cwd"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"${workspaceRoot}"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n            "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"executable"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"<full-path>/firmware.elf"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n            "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"name"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"Debug J-Link"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n            "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"device"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"MK64FN1M0xxx12"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n            "},{type:"element",tagName:"span",properties:{className:["token","property"]},children:[{type:"text",value:'"interface"'}]},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:":"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"swd"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n        "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"}"}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"text",value:"\n"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"}"}]}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I did have to set the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"cortex-debug.JLinkGDBServerPath"}]},{type:"text",value:" and "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"cortex-debug.armToolchainPath"}]},{type:"text",value:" in workspace settings, but if the GDB and arm-eabi executables are in your system path you should be fine."}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Debugging is not the only thing you want though (but it’s a biggie). Other things you might want:"}]},{type:"text",value:"\n"},{type:"element",tagName:"ul",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"A serial monitor: check out "},{type:"element",tagName:"a",properties:{href:"https://marketplace.visualstudio.com/items?itemName=olback.vscode-serial"},children:[{type:"text",value:"this extension"}]},{type:"text",value:"?"}]},{type:"text",value:"\n"},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"You could use PlatformIO’s monitor, but platformIO does take some time to load at startup. So if all you’re going to use is the serial monitor, why go bulky?"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Building and flashing support, instellisense, …"}]},{type:"text",value:"\n"},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Update: check out my other post about Embedded VS Code development (without PlatformIO)"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"h2",properties:{},children:[{type:"text",value:"Conclusion"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"PlatformIO is perfect if you’re a hobbyist and you’re just starting a new project. It will get you started fast, providing you with clean library and code management. If you have an existing project, it might not be trivial to convert to platformIO (using the platformIO board and framework definitions). You might then be better off configuring some extension(s) for debugging, serial console, etc. to fit your codebase."}]}],data:{quirksMode:!1}},fields:{slug:"/pio/",prefix:"2018-07-23"},frontmatter:{title:"PlatformIO: VS Code embedded programming",subTitle:"Turn your favourite editor into an IDE",cover:{childImageSharp:{resize:{src:"/static/pio_sm-78ea9787f091f565486087f7061559a7-160fa.png"}}}}},author:{id:"C:/FILES/git/pers/blog/content/parts/author.md absPath of file >>> MarkdownRemark",html:"<p><strong>Wim M.</strong> Electrical engineer, computer programmer. I love prototyping, listening to programming-related podcasts, etc.</p>"},footnote:{id:"C:/FILES/git/pers/blog/content/parts/footnote.md absPath of file >>> MarkdownRemark",html:'<ul>\n<li>Programming-related blog</li>\n<li>by <a href="https://www.wimmar.be">Wim Marynissen</a></li>\n<li><a href="https://www.wimmar.be/#contact">Contact me</a></li>\n</ul>'},site:{siteMetadata:{facebook:{appId:"411452336030178"}}}},pathContext:{slug:"/pio/"}}}});